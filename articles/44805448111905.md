---
title: "Nand2tetrisをGoで実装する ~ アセンブラ編 ~"
emoji: "😺"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Go","nand2tetris","assembly"]
published: false
---

# Nand2tetrisを実装する・目次 
1. [Nand2tetrisを実装する  ~ ハードウェア編(1 ~ 5章) ~](https://zenn.dev/yukiyada/articles/1c5708ddfb36db)
2. **Nand2tetrisをGoで実装する ~ アセンブラ編(6章) ~**
3. Nand2tetrisをGoで実装する ~ 中間言語・Virtual Machine編(7,8章) ~ (執筆中)
4. Nand2tetrisをGoで実装する ~ コンパイラ編(10,11章) ~ (執筆中)

# 1.はじめに

**「コンピュータの中では何が起こっているのか？」**
 
近年、ソフトウェア開発を取り巻く技術は急速に発展し、ほとんどの人にとって、コンピュータの内部構造はブラックボックス化しているのではないでしょうか。かくいう私もその一人。コンピュータの内部構造を知らずとも、「技術の使い方」さえ知っていれば、プロダクションレベルのアプリケーションが実装できてしまう時代です。

しかし、仮にもソフトウェアエンジニアを名乗るのであれば、基本的な構造くらいは理解しておきたいもの。そう思った私は、低レイヤーの勉強のために、書籍「コンピュータシステムの理論と実装」が提供するNand2tetrisというプロジェクトに取り組みました。以下は実装したリポジトリです。

https://github.com/YadaYuki/nand2tetris-golang

そして、本記事は「コンピュータシステムの理論と実装」の6章に該当するアセンブラ編の実装に関する記事です。

# 2.コンピュータシステムの理論と実装(Nand2tetris)

本章では「コンピュータシステムの理論と実装」という書籍、またその書籍が提供するプロジェクトであるNand2tetrisについて簡単に説明していきます。

https://www.oreilly.co.jp/books/9784873117126/

本書の目的はコンピュータシステムを実際に作り、その作業を通して、コンピュータシステムを深く理解すること。Nand2tetrisというプロジェクト名はNANDゲートを最小素子として、機械語が動作するようなハードウェアを構築し、アセンブラやコンパイラを実装し、最終的にはテトリスが動作するようなコンピュータを構築するという特徴から名付けられています。

そして、本記事・アセンブラ編では、Nand2tetrisが提供する**Hackアセンブリというオリジナルのアセンブリ言語を、前の記事・ハードウェア編で実装したCPU([CPU.hdl](https://github.com/YadaYuki/nand2tetris-golang/blob/main/hardware/computer/CPU.hdl))上で動作するような機械語に変換するアセンブラをGo言語で実装します**。


# 3.アセンブリとは？

前の記事(ハードウェア編)では、16bit機械語が動作するようなコンピュータ・CPUを作成しました。ここで、CPU上で実行することができる16bit機械語によるプログラムを見てみましょう。

```
0000000000000010
1110110000010000
0000000000000011
1110000010010000
0000000000000000
1110001100001000
```
上の機械語プログラムは「2+3の計算結果をデータメモリの0番地に格納する」という単純な処理を実行するプログラムなのですが、**一目見ただけではそのことが全くわからないかと思います。**(少なくとも、私にはわかりませんでした)

このように機械語というのは直感的には理解しづらく、それを直接記述して、プログラムを組んでいく、というのは人間的な作業とは言い難い上に、効率が悪いです。**そこで開発されたのがアセンブリ言語(アセンブリ)です。**

アセンブリは機械語に対応する命令を"Add R2,R1,R3"のような記号の組み合わせで表現します。そして、**アセンブリによるプログラムを機械語に変換するソフトウェアのことをアセンブラ**と呼びます。
